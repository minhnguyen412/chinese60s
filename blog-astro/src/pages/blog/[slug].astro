---
import BlogLayout from '../../layouts/BlogLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');

  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

const {
  title,
  description,
  tag,
  date,
  readTime,
  author,
  heroChar,
  toc,
  prevPost,
  nextPost
} = post.data;
---

<BlogLayout
  title={title}
  description={description}
  tag={tag}
  date={date}
  readTime={readTime}
  author={author}
  heroChar={heroChar}
  toc={toc}
  prevPost={prevPost}
  nextPost={nextPost}
>
  <Content />
</BlogLayout>